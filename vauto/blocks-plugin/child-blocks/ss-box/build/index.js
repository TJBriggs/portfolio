(()=>{"use strict";var e,t={876:(e,t,s)=>{const o=window.wp.blocks,l=window.wp.element,p=window.wp.primitives,r=(0,l.createElement)(p.SVG,{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24"},(0,l.createElement)(p.Path,{d:"M18.7 3H5.3C4 3 3 4 3 5.3v13.4C3 20 4 21 5.3 21h13.4c1.3 0 2.3-1 2.3-2.3V5.3C21 4 20 3 18.7 3zm.8 15.7c0 .4-.4.8-.8.8H5.3c-.4 0-.8-.4-.8-.8V5.3c0-.4.4-.8.8-.8h6.2v8.9l2.5-3.1 2.5 3.1V4.5h2.2c.4 0 .8.4.8.8v13.4z"})),a=window.wp.i18n,n=window.wp.blockEditor,i=window.wp.serverSideRender;var c=s.n(i);const u=window.wp.data,m=window.wp.components,T=e=>{let{postCustomLabel:t,postID:s,postTitle:o,postType:p,postTypeTitle:r,setAttributes:n}=e,i=[],c=[];const[T,b]=(0,l.useState)(i),[y,d]=(0,l.useState)(c);(0,l.useEffect)((()=>{if(p){let e=p.replace(/-|_/g," ").split(" ");for(let t=0;t<e.length;t++)e[t]=e[t].charAt(0).toUpperCase()+e[t].slice(1);let t=e.join(" ");n({postID:s,postTitle:o,postType:p,postTypeTitle:t})}}),[]);const g=(0,u.useSelect)((e=>e("core").getPostTypes({per_page:-1})));g&&g.forEach((e=>{"attachment"!==e.slug&&"wp_block"!==e.slug&&"nav_menu_item"!==e.slug&&"wp_template"!==e.slug&&"wp_template_part"!==e.slug&&"wp_navigation"!==e.slug&&"style-guide"!==e.slug&&i.push({value:e.slug,label:e.name})}));const v=(0,u.useSelect)((e=>e("core").getEntityRecords("postType",p)));return v&&(c.push({value:0,label:"Search by post title..."}),v.forEach((e=>{c.push({value:e.id,label:e.title.rendered})}))),(0,l.createElement)("div",{className:"post-picker"},(0,l.createElement)("div",{className:"post-picker__post-type"},null!==p?(0,l.createElement)("div",{className:"post-picker__preview"},(0,l.createElement)("label",null,"Post Type"),(0,l.createElement)("p",{className:"post-picker__title"},r),(0,l.createElement)("button",{className:"post-picker__clear components-button is-primary",onClick:()=>{console.log("type clear"),n({postID:0,postTitle:"",postType:null,postTypeTitle:""})}},"Clear Post Type")):null===p&&i.length>0?(0,l.createElement)(m.ComboboxControl,{label:"Select a Post Type",value:p,onChange:e=>{let t=e.replace(/-|_/g," ").split(" ");for(let e=0;e<t.length;e++)t[e]=t[e].charAt(0).toUpperCase()+t[e].slice(1);let l=t.join(" ");n({postID:s,postTitle:o,postType:e,postTypeTitle:l})},options:T,onFilterValueChange:e=>b(i.filter((t=>t.label.toLowerCase().startsWith(e.toLowerCase()))))}):(0,l.createElement)("div",{className:"post-picker__spinner"},(0,l.createElement)(m.Spinner,null),(0,l.createElement)("span",null,(0,a.__)("Loading post types...","mx-blocks-plugin")))),(0,l.createElement)("div",{class:"post-picker__posts"},0!==s?(0,l.createElement)("div",{className:"post-picker__preview"},(0,l.createElement)("label",null,"Post Title"),(0,l.createElement)("p",{className:"post-picker__title"},o),(0,l.createElement)("button",{className:"post-picker__clear components-button is-primary",onClick:()=>{console.log("post clear"),n({postID:0,postTitle:"",postType:p,postTypeTitle:r})}},"Clear Post")):0===s&&c.length>0?(0,l.createElement)(m.ComboboxControl,{label:t||"Select a Post",value:s,onChange:e=>{const t=(0,u.select)("core").getEntityRecord("postType",p,e);n({postID:e,postTitle:t.title.rendered,postType:p,postTypeTitle:r})},options:y,onFilterValueChange:e=>d(c.filter((t=>t.label.toLowerCase().startsWith(e.toLowerCase()))))}):null!==p&&0!==s&&0===c.length?(0,l.createElement)("div",{className:"post-picker__spinner"},(0,l.createElement)(m.Spinner,null),(0,l.createElement)("span",null,(0,a.__)("Loading posts...","mx-blocks-plugin"))):null))};(0,o.registerBlockType)("mx/ss-box",{apiVersion:2,title:"Success Story Box",icon:r,category:"ctas",description:"Basic CTA box to display a success story.",attributes:{postID:{type:"number",default:0},postTitle:{type:"string"},postType:{type:"string",default:"success-stories"},postTypeTitle:{type:"string"}},parent:["core/group","mx/column"],edit:function(e){let{attributes:{postID:t,postTitle:s,postType:o,postTypeTitle:p},isSelected:r,setAttributes:a}=e;const i=(0,n.useBlockProps)({className:"ss-box__wrap"});return(0,l.createElement)("div",(0,n.useBlockProps)(i),r||0===t?(0,l.createElement)(T,{postCustomLabel:"Select a Success Story",postID:t,postTitle:s,postType:o,postTypeTitle:p,setAttributes:a}):(0,l.createElement)(c(),{block:"mx/ss-box",attributes:{postID:t,postTitle:s,postType:o,postTypeTitle:p}}))}})}},s={};function o(e){var l=s[e];if(void 0!==l)return l.exports;var p=s[e]={exports:{}};return t[e](p,p.exports,o),p.exports}o.m=t,e=[],o.O=(t,s,l,p)=>{if(!s){var r=1/0;for(c=0;c<e.length;c++){for(var[s,l,p]=e[c],a=!0,n=0;n<s.length;n++)(!1&p||r>=p)&&Object.keys(o.O).every((e=>o.O[e](s[n])))?s.splice(n--,1):(a=!1,p<r&&(r=p));if(a){e.splice(c--,1);var i=l();void 0!==i&&(t=i)}}return t}p=p||0;for(var c=e.length;c>0&&e[c-1][2]>p;c--)e[c]=e[c-1];e[c]=[s,l,p]},o.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return o.d(t,{a:t}),t},o.d=(e,t)=>{for(var s in t)o.o(t,s)&&!o.o(e,s)&&Object.defineProperty(e,s,{enumerable:!0,get:t[s]})},o.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),(()=>{var e={826:0,431:0};o.O.j=t=>0===e[t];var t=(t,s)=>{var l,p,[r,a,n]=s,i=0;if(r.some((t=>0!==e[t]))){for(l in a)o.o(a,l)&&(o.m[l]=a[l]);if(n)var c=n(o)}for(t&&t(s);i<r.length;i++)p=r[i],o.o(e,p)&&e[p]&&e[p][0](),e[p]=0;return o.O(c)},s=globalThis.webpackChunkss_box=globalThis.webpackChunkss_box||[];s.forEach(t.bind(null,0)),s.push=t.bind(null,s.push.bind(s))})();var l=o.O(void 0,[431],(()=>o(876)));l=o.O(l)})();
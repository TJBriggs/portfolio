$(function(){
    $('a[href*=#]:not([href=#])').click(function(){
        if (location.pathname.replace(/^\//, '') == this.pathname.replace(/^\//, '') && location.hostname == this.hostname) {
            var target = $(this.hash);
            target = target.length ? target : $('[name=' + this.hash.slice(1) + ']');
            if (target.length) {
                $('html,body').animate({
                    scrollTop: target.offset().top
                }, 750);
                return false;
            }
        }
    });
});
$(function(){
    $('.process__nav a').click(function(){
        $('a.active__process').removeClass('active__process');
        $(this).addClass('active__process');
    });
});
$(document).on('keydown', function(e){
    if (e.keyCode == 38){
        var $link = $('a.active__process').parent().prev('li').find('a');
        $link.trigger('click');
    } else if (e.keyCode == 32 || e.keyCode == 40){
        var $link = $('a.active__process').parent().next('li').find('a');
        $link.trigger('click');
    }
});
$(window).scroll(function(){
    var ideation = $('section#ideation');
    var design = $('section#design-step');
    var production = $('section#production');
    var activation = $('section#activation');
    if ($(window).scrollTop() < design.offset().top){
        $('.process__nav li').each(function(){
            if ($(this).find('a').attr('href') == '#' + ideation.attr('ID')){
                $('a.active__process').removeClass('active__process');
                $(this).find('a').addClass('active__process');
            }
        });
    }
    if ($(window).scrollTop() > design.offset().top - 500 && $(window).scrollTop() < production.offset().top){
        $('.process__nav li').each(function(){
            if ($(this).find('a').attr('href') == '#' + design.attr('ID')){
                $('a.active__process').removeClass('active__process');
                $(this).find('a').addClass('active__process');
            }
        });
    }
    if ($(window).scrollTop() > production.offset().top - 500 && $(window).scrollTop() < activation.offset().top){
        $('.process__nav li').each(function(){
            if ($(this).find('a').attr('href') == '#' + production.attr('ID')){
                $('a.active__process').removeClass('active__process');
                $(this).find('a').addClass('active__process');
            }
        });
    }
    if ($(window).scrollTop() > activation.offset().top - 500){
        $('.process__nav li').each(function(){
            if ($(this).find('a').attr('href') == '#' + activation.attr('ID')){
                $('a.active__process').removeClass('active__process');
                $(this).find('a').addClass('active__process');
            }
        });
    }
});